<wxs src="../../utils/substring.wxs" module="tools" />

<view class="release">
  <view class="release-container">
    <view class="release-main">
      <view class="title">
        <van-field
          value="{{ formData.title }}"
          data-attribute="title"
          bind:change="onChange"
          placeholder="请输入案例标题"
          border="{{ false }}"
        />
      </view>
      <view class="content">
        <view>
          <van-field
            value="{{ formData.backdrop }}"
            data-attribute="backdrop"
            bind:change="onChange"
            type="textarea"
            placeholder="请填写案例背景"
            autosize
            border="{{ false }}"
          />
        </view>
      </view>
    </view>

    <view class="release-option">
      <view wx:for="{{ opitonList }}" bindtap="handleClickEvent" data-current="{{ item.text }}">
        <image src="{{ item.icon }}" />
        <view >{{ item.text }}</view>
      </view>
    </view>
  </view>

  <!-- 展示区 -->
  <view class="show-area" wx:if="{{ currentType && formData.toppic }}">
    <image wx:if="{{ currentType === '首图' }}" src="{{ formData.toppic }}" />
    <video 
      wx:if="{{ currentType === '视频' }}" 
      src="{{ formData.toppic }}" 
      show-fullscreen-btn="{{ false }}"
    />
  </view>
  <view class="show-area" wx:if="{{ currentType && formData.backpic }}">
    <image src="{{ formData.backpic }}" />
  </view>

  <view class="common">
    <view class="common-header">案例介绍</view>
    <view class="common-main-copy">
      <view 
        class="area introduce" 
        wx:for="{{ introduceList }}" 
        bindtap="navigationToSelectPage" data-number="1"
      >
        <text >{{ item }}</text>
        <view >
          <image src="/assets/images/arrow-right2.png" />
        </view>
      </view>

      <view 
        class="area introduce"  
      >
        <text >内容详情</text>
        <view >
          <van-field
            value="{{ formData.content }}"
            data-attribute="content"
            bind:change="onChange"
            placeholder="请填写内容详情"
            input-align="right"
            autosize
            border="{{ false }}"
          />
        </view>
      </view>
    </view>
  </view>

  <view class="common">
    <view class="common-header">区域设置</view>
    <view class="common-main">
      <view class="area">
        <text >七大区</text>
        <view bindtap="handleClickToShowSelectPanel" data-type="area">
          <text >{{ formData.area ? '已选择' : '请选择' }}</text>
          <image src="/assets/images/arrow-right2.png" />
        </view>
      </view>

      <view class="area">
        <text >省份城市</text>
        <view >
          <picker mode="region" 
            bindchange="bindRegionChange"
            range='{{ multiArray }}'
          >
            <text >{{ multiArray.length ? '已选择' : '请选择' }}</text>
          </picker> 
          
          <image src="/assets/images/arrow-right2.png" />
        </view>
      </view>
    </view>
  </view>

  <view class="common">
    <view class="common-header">其它设置</view>
    <view class="common-main">
      <view class="area">
        <text >面向行业</text>
        <view bindtap="handleClickToShowSelectPanel" data-type="trade">
          <text >{{ formData.trade ? '已选择' : '请选择' }}</text>
          <image src="/assets/images/arrow-right2.png" />
        </view>
      </view>

      <view class="area">
        <text >添加标签</text>
        <view bindtap="navigationToSelectPage" data-number="1">
          <text >{{ formData.celebrityinfo_clabel ? '已选择' : '请选择' }}</text>
          <image src="/assets/images/arrow-right2.png" />
        </view>
      </view>
    </view>
  </view>

  <view class="common">
    <view class="common-header">备注</view>
    <view class="textarea-container">
      <van-field
        value="{{ remarks }}"
        data-attribute="remarks"
        bind:change="onChange"
        type="textarea"
        placeholder="请填写备注说明…"
        autosize
        maxlength="{{ 200 }}"
        border="{{ false }}"
      />
    </view>
  </view>

  <view class="select-container">
    <view class="select-container-item">
      <image src="{{ isJoin ? checkActiveImage : checkImage }}"  />
      <view >
        <text >是否参加</text>
        <text >《BP案例大赛台》</text>
      </view>
    </view>

    <view class="select-container-item">
      <image src="{{ isJoin ? checkActiveImage : checkImage }}"  />
      <view >
        <text >已阅读并同意</text>
        <text >《BP数字产品平台》</text>
      </view>
    </view>
  </view>

  <view class="btn">
    <view bindtap="submit">提交发布</view>
  </view>


  <van-popup show="{{ area }}" position="bottom" custom-style="height: 40%;">
    <van-picker 
      show-toolbar
      data-type="area"
      bind:cancel="onClose"
      bind:confirm="onConfirm"
      columns="{{ areaList }}"
    />
  </van-popup>

  <van-popup show="{{ trade }}" position="bottom" custom-style="height: 40%;">
    <van-picker 
      show-toolbar
      data-type="trade"
      bind:cancel="onClose"
      bind:confirm="onConfirm"
      columns="{{ caseTradeList }}" 
    />
  </van-popup>
</view>